# ğŸ“š API Biblioteca â€“ Sistema de Gerenciamento de AluguÃ©is de Livros

Este projeto Ã© uma API REST desenvolvida em **Java 21** com **Spring Boot**, que gerencia o fluxo completo de uma biblioteca: autores, livros, locatÃ¡rios e aluguÃ©is.  
Permite cadastrar, atualizar, listar e remover entidades, alÃ©m de controlar a disponibilidade dos livros e a devoluÃ§Ã£o de exemplares.

---

## ğŸš€ Tecnologias Utilizadas
- Java 17
- Spring Boot
- Spring Data JPA
- Lombok
- H2 Database
- Maven
- RESTful API

---

## ğŸš€ Endpoints Principais

### ğŸ‘©â€ğŸ’¼ Autores
- **POST** `/api/biblioteca/autores` â†’ Cadastra um novo autor
- **PUT** `/api/biblioteca/autores/{id}` â†’ Atualiza um autor existente
- **GET** `/api/biblioteca/autores` â†’ Lista todos os autores
- **GET** `/api/biblioteca/autores/nome/{nome}` â†’ Busca autor pelo nome
- **DELETE** `/api/biblioteca/autores/{id}` â†’ Remove um autor

### ğŸ“– Livros
- **POST** `/api/biblioteca/livros` â†’ Cadastra livro e vincula autores
- **PUT** `/api/biblioteca/livros/{id}` â†’ Atualiza livro existente
- **GET** `/api/biblioteca/livros` â†’ Lista todos os livros
- **GET** `/api/biblioteca/livros/{id}` â†’ Busca livro por ID
- **GET** `/api/biblioteca/livros/disponiveis` â†’ Lista livros disponÃ­veis
- **GET** `/api/biblioteca/livros/alugados` â†’ Lista livros alugados
- **GET** `/api/biblioteca/livros/autor/{nomeAutor}` â†’ Lista livros por autor
- **DELETE** `/api/biblioteca/livros/{id}` â†’ Remove livro

### ğŸ§ LocatÃ¡rios
- **POST** `/api/biblioteca/locatarios` â†’ Cadastra um locatÃ¡rio
- **GET** `/api/biblioteca/locatarios` â†’ Lista locatÃ¡rios
- **GET** `/api/biblioteca/locatarios/{id}/livros` â†’ Lista livros alugados por um locatÃ¡rio
- **DELETE** `/api/biblioteca/locatarios/{id}` â†’ Remove locatÃ¡rio

### ğŸ”„ AluguÃ©is
- **POST** `/api/biblioteca/alugueis` â†’ Cria um aluguel com locatÃ¡rio e livros
- **GET** `/api/biblioteca/alugueis` â†’ Lista todos os aluguÃ©is
- **PUT** `/api/biblioteca/alugueis/{id}/finalizar` â†’ Finaliza aluguel (devoluÃ§Ã£o de livros)

---

## ğŸ” Fluxo Recomendado de Testes

1ï¸âƒ£ **POST /autores** â†’ cadastra autores  
2ï¸âƒ£ **POST /livros** â†’ cadastra livros vinculando autores  
3ï¸âƒ£ **POST /locatarios** â†’ cadastra locatÃ¡rios  
4ï¸âƒ£ **POST /alugueis** â†’ cria aluguÃ©is com livros e locatÃ¡rios  
5ï¸âƒ£ **PUT /alugueis/{id}/finalizar** â†’ devolve livros  
6ï¸âƒ£ **GET /livros/disponiveis** â†’ confirma que os livros foram devolvidos

---

## ğŸ§° Extras

### ğŸ’¾ Banco de Dados em MemÃ³ria (H2)
Acesse em: [http://localhost:8080/h2-console](http://localhost:8080/h2-console)
- **JDBC URL:** `jdbc:h2:mem:biblioteca`
- **UsuÃ¡rio:** `sa`
- **Senha:** *(vazio)*

### ğŸ” TransaÃ§Ãµes
As operaÃ§Ãµes crÃ­ticas estÃ£o anotadas com `@Transactional` para garantir consistÃªncia entre as tabelas.

### âš ï¸ Tratamento de Erros
O controller utiliza `@ExceptionHandler` para capturar e exibir mensagens legÃ­veis em caso de:

- `EntityNotFoundException`
- `IllegalStateException`
- `IllegalArgumentException`

---

## ğŸ§¾ LicenÃ§a

Este projeto Ã© de uso **livre para fins educacionais** e pode ser adaptado para outros contextos de gestÃ£o de acervos e locaÃ§Ãµes.

Desenvolvido com â¤ï¸ em **Java** e **Spring Boot**.
