# ğŸ“š API Biblioteca â€“ Sistema de Gerenciamento de AluguÃ©is de Livros

Este projeto Ã© uma API REST desenvolvida em **Java 17** com **Spring Boot**, que gerencia o fluxo completo de uma biblioteca: autores, livros, locatÃ¡rios e aluguÃ©is.  
Permite cadastrar, atualizar, listar e remover entidades, alÃ©m de controlar a disponibilidade dos livros e a devoluÃ§Ã£o de exemplares.

---

## ğŸš€ Tecnologias Utilizadas
- Java 17
- Spring Boot
- Spring Data JPA
- Lombok
- MySQL
- Maven
- RESTful API

---

## ğŸš€ Endpoints Principais

### ğŸ‘©â€ğŸ’¼ Autores
- **POST** `/api/biblioteca/autores` â†’ Cadastra um novo autor
- **PUT** `/api/biblioteca/autores/{id}` â†’ Atualiza um autor existente
- **GET** `/api/biblioteca/autores` â†’ Lista todos os autores
- **GET** `/api/biblioteca/autores/nome/{nome}` â†’ Busca autor pelo nome
- **DELETE** `/api/biblioteca/autores/{id}` â†’ Remove um autor

### ğŸ“– Livros
- **POST** `/api/biblioteca/livros` â†’ Cadastra livro e vincula autores
- **PUT** `/api/biblioteca/livros/{id}` â†’ Atualiza livro existente
- **GET** `/api/biblioteca/livros` â†’ Lista todos os livros
- **GET** `/api/biblioteca/livros/{id}` â†’ Busca livro por ID
- **GET** `/api/biblioteca/livros/disponiveis` â†’ Lista livros disponÃ­veis
- **GET** `/api/biblioteca/livros/alugados` â†’ Lista livros alugados
- **GET** `/api/biblioteca/livros/autor/{nomeAutor}` â†’ Lista livros por autor
- **DELETE** `/api/biblioteca/livros/{id}` â†’ Remove livro

### ğŸ§ LocatÃ¡rios
- **POST** `/api/biblioteca/locatarios` â†’ Cadastra um locatÃ¡rio
- **GET** `/api/biblioteca/locatarios` â†’ Lista locatÃ¡rios
- **GET** `/api/biblioteca/locatarios/{id}/livros` â†’ Lista livros alugados por um locatÃ¡rio
- **DELETE** `/api/biblioteca/locatarios/{id}` â†’ Remove locatÃ¡rio

### ğŸ”„ AluguÃ©is
- **POST** `/api/biblioteca/alugueis` â†’ Cria um aluguel com locatÃ¡rio e livros
- **GET** `/api/biblioteca/alugueis` â†’ Lista todos os aluguÃ©is
- **PUT** `/api/biblioteca/alugueis/{id}/finalizar` â†’ Finaliza aluguel (devoluÃ§Ã£o de livros)

---

## ğŸ” Fluxo Recomendado de Testes

1ï¸âƒ£ **POST /autores** â†’ cadastra autores  
2ï¸âƒ£ **POST /livros** â†’ cadastra livros vinculando autores  
3ï¸âƒ£ **POST /locatarios** â†’ cadastra locatÃ¡rios  
4ï¸âƒ£ **POST /alugueis** â†’ cria aluguÃ©is com livros e locatÃ¡rios  
5ï¸âƒ£ **PUT /alugueis/{id}/finalizar** â†’ devolve livros  
6ï¸âƒ£ **GET /livros/disponiveis** â†’ confirma que os livros foram devolvidos

---

## ğŸ§° Extras

## ğŸ’¾ Acesso ao Banco de Dados MySQL para Testes da AplicaÃ§Ã£o

Para revisar e testar a aplicaÃ§Ã£o, siga os passos abaixo para acessar o banco de dados **MySQL** localmente e validar as tabelas geradas automaticamente pelo **Spring Boot**.

---

### ğŸ”§ ConfiguraÃ§Ãµes do Banco de Dados
As configuraÃ§Ãµes utilizadas pela aplicaÃ§Ã£o estÃ£o definidas no arquivo `application.properties`:

```properties
spring.datasource.url=jdbc:mysql://localhost:3306/biblioteca?createDatabaseIfNotExist=true&serverTimezone=America/Sao_Paulo
spring.datasource.username=root
spring.datasource.password=root123
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
````

## ğŸ–¥ï¸ Acessando o MySQL via CMD (Windows)

## 1 - Certifique-se de que o serviÃ§o MySQL estÃ¡ ativo:

```bash
net start MySQL80
````
## 2 - Acesse o MySQL com o usuÃ¡rio root:

````bash

mysql -u root -p
````
## 3 -  Liste os bancos disponÃ­veis para confirmar a existÃªncia do banco da aplicaÃ§Ã£o:

````bash
SHOW DATABASES;
````


VocÃª deverÃ¡ ver algo como:

```psql
+--------------------+
| Database           |
+--------------------+
| biblioteca         |
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
````

## 4 - Selecione o banco de dados da aplicaÃ§Ã£o:

```psql
USE biblioteca;
````

## ğŸ§© 5 - Mostrar todas as tabelas do banco:

```psql
SHOW tables;
````

## Exemplo de resultado esperado:

````+---------------------+
| Tables_in_biblioteca |
+---------------------+
| alugueis            |
| autores             |
| livros              |
| locatarios          |
| livros_autores      |
+---------------------+
````    


# âœ… ObservaÃ§Ãµes:

O banco Ã© criado automaticamente ao executar a aplicaÃ§Ã£o, caso ainda nÃ£o exista.

O usuÃ¡rio padrÃ£o utilizado Ã© root com a senha root123.

O dialeto do Hibernate estÃ¡ configurado para MySQL8Dialect, garantindo compatibilidade total com o MySQL 8.0.

Certifique-se de que o serviÃ§o MySQL80 estÃ¡ em execuÃ§Ã£o antes de rodar a aplicaÃ§Ã£o.

---

### ğŸ” TransaÃ§Ãµes
As operaÃ§Ãµes crÃ­ticas estÃ£o anotadas com `@Transactional` para garantir consistÃªncia entre as tabelas.

### âš ï¸ Tratamento de Erros
O controller utiliza `@ExceptionHandler` para capturar e exibir mensagens legÃ­veis em caso de:

- `EntityNotFoundException`
- `IllegalStateException`
- `IllegalArgumentException`

---

## ğŸ§¾ LicenÃ§a

Este projeto Ã© de uso **livre para fins educacionais** e pode ser adaptado para outros contextos de gestÃ£o de acervos e locaÃ§Ãµes.

Desenvolvido com â¤ï¸ em **Java** e **Spring Boot**.
