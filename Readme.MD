# üìö API Biblioteca ‚Äì Sistema de Gerenciamento de Alugu√©is de Livros

Este projeto √© uma API REST desenvolvida em **Java 17** com **Spring Boot**, que gerencia o fluxo completo de uma biblioteca: autores, livros, locat√°rios e alugu√©is.  
Permite cadastrar, atualizar, listar e remover entidades, al√©m de controlar a disponibilidade dos livros e a devolu√ß√£o de exemplares.

---

## üöÄ Tecnologias Utilizadas
- Java 17
- Spring Boot
- Spring Data JPA
- Lombok
- MySQL
- Maven
- RESTful API

---

## üöÄ Endpoints Principais

### üë©‚Äçüíº Autores
- **POST** `/api/biblioteca/autores` ‚Üí Cadastra um novo autor
- **PUT** `/api/biblioteca/autores/{id}` ‚Üí Atualiza um autor existente
- **GET** `/api/biblioteca/autores` ‚Üí Lista todos os autores
- **GET** `/api/biblioteca/autores/nome/{nome}` ‚Üí Busca autor pelo nome
- **DELETE** `/api/biblioteca/autores/{id}` ‚Üí Remove um autor

### üìñ Livros
- **POST** `/api/biblioteca/livros` ‚Üí Cadastra livro e vincula autores
- **PUT** `/api/biblioteca/livros/{id}` ‚Üí Atualiza livro existente
- **GET** `/api/biblioteca/livros` ‚Üí Lista todos os livros
- **GET** `/api/biblioteca/livros/{id}` ‚Üí Busca livro por ID
- **GET** `/api/biblioteca/livros/disponiveis` ‚Üí Lista livros dispon√≠veis
- **GET** `/api/biblioteca/livros/alugados` ‚Üí Lista livros alugados
- **GET** `/api/biblioteca/livros/autor/{nomeAutor}` ‚Üí Lista livros por autor
- **DELETE** `/api/biblioteca/livros/{id}` ‚Üí Remove livro

### üßç Locat√°rios
- **POST** `/api/biblioteca/locatarios` ‚Üí Cadastra um locat√°rio
- **GET** `/api/biblioteca/locatarios` ‚Üí Lista locat√°rios
- **GET** `/api/biblioteca/locatarios/{id}/livros` ‚Üí Lista livros alugados por um locat√°rio
- **DELETE** `/api/biblioteca/locatarios/{id}` ‚Üí Remove locat√°rio

### üîÑ Alugu√©is
- **POST** `/api/biblioteca/alugueis` ‚Üí Cria um aluguel com locat√°rio e livros
- **GET** `/api/biblioteca/alugueis` ‚Üí Lista todos os alugu√©is
- **PUT** `/api/biblioteca/alugueis/{id}/finalizar` ‚Üí Finaliza aluguel (devolu√ß√£o de livros)

---

## üîÅ Fluxo Recomendado de Testes

1Ô∏è‚É£ **POST /autores** ‚Üí cadastra autores  
2Ô∏è‚É£ **POST /livros** ‚Üí cadastra livros vinculando autores  
3Ô∏è‚É£ **POST /locatarios** ‚Üí cadastra locat√°rios  
4Ô∏è‚É£ **POST /alugueis** ‚Üí cria alugu√©is com livros e locat√°rios  
5Ô∏è‚É£ **PUT /alugueis/{id}/finalizar** ‚Üí devolve livros  
6Ô∏è‚É£ **GET /livros/disponiveis** ‚Üí confirma que os livros foram devolvidos

---

## üß∞ Extras

## üíæ Acesso ao Banco de Dados MySQL para Testes da Aplica√ß√£o

Para revisar e testar a aplica√ß√£o, siga os passos abaixo para acessar o banco de dados **MySQL** localmente e validar as tabelas geradas automaticamente pelo **Spring Boot**.

---

### üîß Configura√ß√µes do Banco de Dados
As configura√ß√µes utilizadas pela aplica√ß√£o est√£o definidas no arquivo `application.properties`:

```properties
spring.datasource.url=jdbc:mysql://localhost:3306/biblioteca?createDatabaseIfNotExist=true&serverTimezone=America/Sao_Paulo
spring.datasource.username=root
spring.datasource.password=root123
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
````

## üñ•Ô∏è Acessando o MySQL via CMD (Windows)

## 1 - Certifique-se de que o servi√ßo MySQL est√° ativo:

```bash
net start MySQL80
````
## 2 - Acesse o MySQL com o usu√°rio root:

````bash

mysql -u root -p
````
## 3 -  Liste os bancos dispon√≠veis para confirmar a exist√™ncia do banco da aplica√ß√£o:

````bash
SHOW DATABASES;
````


Voc√™ dever√° ver algo como:

```psql
+--------------------+
| Database           |
+--------------------+
| biblioteca         |
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
````

## 4 - Selecione o banco de dados da aplica√ß√£o:

```psql
USE biblioteca;
````

## üß© 5 - Mostrar todas as tabelas do banco:

```psql
SHOW tables;
````

## Exemplo de resultado esperado:

````+---------------------+
| Tables_in_biblioteca |
+---------------------+
| alugueis            |
| autores             |
| livros              |
| locatarios          |
| livros_autores      |
+---------------------+
````    

## üßæ 6 - Ver dados de cada tabela (uma por uma):

```psql
SELECT * FROM autores;
SELECT * FROM livros;
SELECT * FROM locatario;
SELECT * FROM aluguel;
SELECT * FROM livro_autor;
SELECT * FROM aluguel_livros;
```

## Observa√ß√£o:

üí° Use apenas os nomes que realmente aparecem no resultado do SHOW TABLES;.
Se quiser visualizar tudo de uma vez, copie e cole todos os SELECT juntos ‚Äî o MySQL vai executar um por um.


# ‚úÖ Observa√ß√µes:

O banco √© criado automaticamente ao executar a aplica√ß√£o, caso ainda n√£o exista.

O usu√°rio padr√£o utilizado √© root com a senha root123.

O dialeto do Hibernate est√° configurado para MySQL8Dialect, garantindo compatibilidade total com o MySQL 8.0.

Certifique-se de que o servi√ßo MySQL80 est√° em execu√ß√£o antes de rodar a aplica√ß√£o.

---

## üí• Dica extra ‚Äî ver a estrutura (colunas) de cada tabela:

```psql
DESCRIBE autores;
DESCRIBE livros;
DESCRIBE locatario;
DESCRIBE aluguel;
```

### üîê Transa√ß√µes
As opera√ß√µes cr√≠ticas est√£o anotadas com `@Transactional` para garantir consist√™ncia entre as tabelas.

### ‚ö†Ô∏è Tratamento de Erros
O controller utiliza `@ExceptionHandler` para capturar e exibir mensagens leg√≠veis em caso de:

- `EntityNotFoundException`
- `IllegalStateException`
- `IllegalArgumentException`

---

## üßæ Licen√ßa

Este projeto √© de uso **livre para fins educacionais** e pode ser adaptado para outros contextos de gest√£o de acervos e loca√ß√µes.

Desenvolvido com ‚ù§Ô∏è em **Java** e **Spring Boot**.
